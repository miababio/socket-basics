                                    NOTES
                                    -----
                                    
Getting Started
    - Before, we used HTTP requests between the client and the server to manage and retrieve data (GET, POST, etc.)
    - With sockets, we can get the server to push live data to the client, without the client having to request anything
        - Can be useful for examples like messaging (chat app), or email
    - 2-way communication; Client can ask/receive info, and the server can do the same
    - Setting up for using sockets
        - Express -> version 4.13.3
        - server.js
            - Difference this time is that we are starting the server with built-in node modules, instead of using express
            - See Example 1
    - Quick Reminder for pushing code to heroku
        - First time around you have to do:
            - heroku create
            - git push heroku master (only need to specify master the first time)
        - After that, you can normally do "git push heroku"
    
Adding Socket.io To Your App
    - Install module Socket.io
        - Using version 1.3.7, latest version is 2.0.3
    - To start using it, we require it like so:
        - var io = require("socket.io")(http);
        - Remember how to use Express we used the 'app' variable, and did commands with it (app.use, app.get, etc.)? Think of using the 'io' variable to do the same thing, but with sockets
    - To see this in action, we need to do some code on the frontend as well
        - Adding jQuery (http://jquery.com/download/)
        - Add socket-io (https://cdn.socket.io/socket.io-1.3.7.js)
    - Connecting to our server
        - See Example 2
        
Exploring the Frontend
    - Moved script code into app.js
    - Improves code testing, maintenance of code by putting it in a separate file
    - On the server side, we used the on() function to let the server know when a client has connected to it; We can do something similar on the client side, to let the client know when the server is connected to the client
        - See Example 3
    - Problem: We can see our log from the server, but when it comes to seeing our messages on the front-end, we can't see it
    - Solution: Use Chrome Developer Tools
        - Let's you explore the frontend of your application    
        - To get there, click on the Overflow menu -> More Tools -> Developer Tools
            - Shortcut: Ctrl + Shift + I
        - The first thing you get navigated to is the Elements inspector
            - This tab let's you see all the HTML loaded in this project, including some extra things from chrome-extensions
        - We want the Console tab
            - Similar to command prompt
            - This is where we see our "Connected to socket.io server!" message   
            - Another cool thing with the console is that you can type in Javascript code straight up inside of it
                - You can create variables and display them by just typing the variable name
                    - Ex: > var name = "Michael";
                          > name // prints Michael
                - You can display complex objects/variable as well
                    - Very useful for debugging when something's going wrong

Sending Live Data Back & Forth
    - Ex: Chat app;
        - Basic idea is let's say it's between you and someone else. You send a message -> message goes to server -> server gets message and sends it to everybody's screen, including yours
    - server.js io.on actually has a "socket" parameter
        - io.on("connection", function(socket)
            - socket = 1 individual connection
            - inside of this fuction, you can have as many custom events as you want (message, photoResized, pizzeDelivered, etc.)
            - emit("<event_name>", <data_you_want_to_send>)
                - event_name -> a custom event name (Ex: "message")
                - <data_you_want_to_send> -> The data you want to send
                    - Note: This parameter only lets you have 1 thing to send, so if you want to send multiple things, a good idea is to use an object
                        - This let's you send all data at once, such as the text, a timestamp, etc.
    - Sending live data -> basic example
        - See Example 4
    - Two Browsers Communicating
        - See Example 5
            - NOTE: socket.broadcast.emit -> Sends to all browsers EXCEPT you
                    io.emit               -> Sends to all browsers INCLUDING you

Creating The Front-end UI
    - 
                                  
                                  Examples
                                  --------
                            
Example 1 - Setup for Socket.io
---------
var PORT = process.env.PORT || 3000;
var express = require("express");
var app = express();

// Tells Node to start a new server and use the Express app as a boilerplate
// Anything the Express app listens to, the server should listen as well
var http = require("http").Server(app);

app.use(express.static(__dirname + "/public"));

http.listen(PORT, function() {
   console.log("Server started!"); 
});


Example 2 - Connecting to the Server
---------

    server.js
    ---------
    var PORT = process.env.PORT || 3000;
    var express = require("express");
    var app = express();
    var http = require("http").Server(app);
    var io = require("socket.io")(http);              // Format socket.io expects

    app.use(express.static(__dirname + "/public"));

    io.on("connection", function() {                  // on -> lets you listen for events (name of event, function)
        console.log("User connected via socket.io!"); // prints when we get a connection
    }); 

    http.listen(PORT, function() {
       console.log("Server started!"); 
    });

    index.html
    ----------
    <!doctype html>
    <html>
        <head>
            <meta charset="utf-8">
            <title>Socket.io Basics</title>
        </head>
        <body>
            <script src="js/jquery-3.2.1.min.js"></script>
            <script src="js/socket.io-1.3.7.js"></script>

            <script type="text/javascript">
                var socket = io(); // io is defined in socket.io library
            </script>
        </body>
    </html>


Example 3 - Connecting Client to Server
---------
var socket = io();

socket.on("connect", function() {
   console.log("Connected to socket.io server!"); 
});


Example 4 - Send Live Data -> Server to Client Example
---------

    server.js
    ---------
    var PORT = process.env.PORT || 3000;
    var express = require("express");
    var app = express();
    var http = require("http").Server(app);
    var io = require("socket.io")(http); // Format socket.io expects

    app.use(express.static(__dirname + "/public"));

    io.on("connection", function(socket) { // on -> lets you listen for events (name of event, function)
        console.log("User connected via socket.io!"); // prints when we get a connection

        socket.emit("message", { // Emits an event; (event_name, data to send)
            text: "Welcome to the chat application!"
        });
    }); 

    app.js
    ------
    http.listen(PORT, function() {
       console.log("Server started!"); 
    });

    var socket = io();

    socket.on("connect", function() {
       console.log("Connected to socket.io server!"); 
    });

    socket.on("message", function(message) {
        console.log("New message:");
        console.log(message.text);
    });
    
    
Example 5 - Two Browsers Communicating (server.js)
---------
var PORT = process.env.PORT || 3000;
var express = require("express");
var app = express();
var http = require("http").Server(app);
var io = require("socket.io")(http); // Format socket.io expects

app.use(express.static(__dirname + "/public"));

io.on("connection", function(socket) { // on -> lets you listen for events (name of event, function)
    console.log("User connected via socket.io!"); // prints when we get a connection
    
    socket.on("message", function(message) { // Listens for a message event
        console.log("Message received: " + message.text);
        socket.broadcast.emit("message", message); // Sends message to every other browser connected except us
    });
    
    socket.emit("message", { // Emits an event; (event_name, data to send)
        text: "Welcome to the chat application!"
    });
}); 

http.listen(PORT, function() {
   console.log("Server started!"); 
});

    In Chrome
    ---------
        - Open two browsers and have them both connect to localhost:3000
        - Open DevTools on both
        - On one broswer, onpen the Console tab and send a message, and see it appear on the other, and vice-versa!
            - Ex: socket.emit("message", {text: "Hey Everybody!"});


Example 6 - 
---------
